# EMS MySQL Manager Pro 3.3.0.2
# ---------------------------------------
# Host     : localhost
# Port     : 3306
# Database : mzz


SET FOREIGN_KEY_CHECKS=0;

DROP DATABASE IF EXISTS `mzz`;

CREATE DATABASE `mzz`
    CHARACTER SET 'cp1251'
    COLLATE 'cp1251_general_ci';

USE `mzz`;

#
# Structure for the `news_news` table : 
#

DROP TABLE IF EXISTS `news_news`;

CREATE TABLE `news_news` (
  `id` int(11) NOT NULL auto_increment,
  `title` varchar(255) NOT NULL default '',
  `editor` int(11) NOT NULL default '0',
  `text` text NOT NULL,
  `folder_id` int(11) default NULL,
  `created` int(11) default NULL,
  `updated` int(11) default NULL,
  KEY `id` (`id`),
  KEY `folder_id` (`folder_id`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `news_news` table  (LIMIT 0,500)
#

INSERT INTO `news_news` (`id`, `title`, `editor`, `text`, `folder_id`, `created`, `updated`) VALUES 
  (1,'новость 1',1,'текст 1\r\n335345\r\naw\r\n',1,1140071407,1152753578),
  (2,'новость 2',2,'текст 21',1,1140071307,1151124950),
  (4,'новость 3',2,'текст 31',3,1140071207,1151126312),
  (5,'новость 4',2,'текст 4',2,1140071107,1140071117),
  (9,'`',1,'`',3,1149103108,1149103218);

COMMIT;

#
# Structure for the `news_news_folder` table : 
#

DROP TABLE IF EXISTS `news_news_folder`;

CREATE TABLE `news_news_folder` (
  `id` int(11) NOT NULL auto_increment,
  `name` char(255) default NULL,
  `parent` int(11) default '0',
  PRIMARY KEY  (`id`),
  KEY `name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `news_news_folder` table  (LIMIT 0,500)
#

INSERT INTO `news_news_folder` (`id`, `name`, `parent`) VALUES 
  (1,'root',1),
  (2,'parent1',2),
  (3,'parent21',3);

COMMIT;

#
# Structure for the `news_news_folder_tree` table : 
#

DROP TABLE IF EXISTS `news_news_folder_tree`;

CREATE TABLE `news_news_folder_tree` (
  `id` int(10) NOT NULL auto_increment,
  `lkey` int(10) NOT NULL default '0',
  `rkey` int(10) NOT NULL default '0',
  `level` int(10) NOT NULL default '0',
  PRIMARY KEY  (`id`),
  KEY `left_key` (`lkey`,`rkey`,`level`),
  KEY `level` (`level`,`lkey`),
  KEY `rkey` (`rkey`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `news_news_folder_tree` table  (LIMIT 0,500)
#

INSERT INTO `news_news_folder_tree` (`id`, `lkey`, `rkey`, `level`) VALUES 
  (1,1,6,1),
  (2,2,3,2),
  (3,4,5,2);

COMMIT;

#
# Structure for the `news_news_tree` table : 
#

DROP TABLE IF EXISTS `news_news_tree`;

CREATE TABLE `news_news_tree` (
  `id` int(11) NOT NULL auto_increment,
  `name` char(255) default NULL,
  `parent` int(11) default '0',
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `news_news_tree` table  (LIMIT 0,500)
#

INSERT INTO `news_news_tree` (`id`, `name`, `parent`) VALUES 
  (1,'root',0),
  (2,'folder2',0);

COMMIT;

#
# Structure for the `page_page` table : 
#

DROP TABLE IF EXISTS `page_page`;

CREATE TABLE `page_page` (
  `id` int(11) NOT NULL auto_increment,
  `name` varchar(255) NOT NULL default '',
  `title` varchar(255) NOT NULL default '',
  `content` text NOT NULL,
  KEY `id` (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `page_page` table  (LIMIT 0,500)
#

INSERT INTO `page_page` (`id`, `name`, `title`, `content`) VALUES 
  (1,'main','Первая страница','Это первая, главная страница'),
  (2,'404','404 Not Found','Запрашиваемая страница не найдена!'),
  (3,'test','test','test');

COMMIT;

#
# Structure for the `sys_access` table : 
#

DROP TABLE IF EXISTS `sys_access`;

CREATE TABLE `sys_access` (
  `id` int(11) NOT NULL auto_increment,
  `module_section_property` int(11) default NULL,
  `obj_id` int(11) default NULL,
  `uid` int(11) default NULL,
  `gid` int(11) default NULL,
  `allow` tinyint(1) default NULL,
  `deny` tinyint(1) default NULL,
  PRIMARY KEY  (`id`),
  KEY `module_property_id` (`module_section_property`,`obj_id`,`uid`,`gid`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `sys_access` table  (LIMIT 0,500)
#

INSERT INTO `sys_access` (`id`, `module_section_property`, `obj_id`, `uid`, `gid`, `allow`, `deny`) VALUES 
  (5,2,2,NULL,1,1,NULL),
  (3,2,1,NULL,1,1,NULL),
  (6,2,4,NULL,1,1,NULL),
  (7,2,5,NULL,1,1,NULL),
  (8,2,9,NULL,1,1,NULL),
  (9,5,1,NULL,1,1,NULL),
  (10,5,2,NULL,1,1,NULL),
  (11,5,4,NULL,1,1,NULL),
  (12,5,5,NULL,1,1,NULL),
  (13,5,9,NULL,1,1,NULL),
  (14,6,1,NULL,3,1,NULL),
  (15,6,2,NULL,3,1,NULL),
  (16,6,4,NULL,3,1,NULL),
  (17,6,5,NULL,3,1,NULL),
  (18,6,9,NULL,3,1,NULL),
  (24,4,1,NULL,3,1,NULL),
  (25,4,2,NULL,3,1,NULL),
  (26,4,3,NULL,3,1,NULL),
  (27,1,1,NULL,1,1,NULL),
  (28,1,2,NULL,1,1,NULL),
  (29,1,3,NULL,1,1,NULL),
  (30,7,1,NULL,1,1,NULL),
  (31,7,2,NULL,1,1,NULL),
  (32,7,3,NULL,1,1,NULL),
  (33,8,1,NULL,3,1,NULL),
  (34,8,2,NULL,3,1,NULL),
  (35,8,3,NULL,3,1,NULL),
  (36,9,1,NULL,3,1,NULL),
  (37,9,2,NULL,3,1,NULL),
  (38,9,3,NULL,3,1,NULL),
  (39,10,1,NULL,3,1,NULL),
  (40,10,2,NULL,3,1,NULL),
  (41,10,3,NULL,3,1,NULL),
  (42,11,1,NULL,1,1,NULL),
  (43,12,1,NULL,1,1,NULL),
  (44,13,1,NULL,1,1,NULL),
  (45,2,0,NULL,1,1,NULL),
  (46,5,0,NULL,3,1,NULL),
  (47,6,0,NULL,3,1,NULL),
  (48,4,0,NULL,3,1,NULL),
  (49,1,0,NULL,3,1,NULL),
  (50,7,0,NULL,1,1,NULL),
  (51,8,0,NULL,3,1,NULL),
  (52,9,0,NULL,3,1,NULL),
  (53,10,0,NULL,3,1,NULL);

COMMIT;

#
# Structure for the `sys_access_modules` table : 
#

DROP TABLE IF EXISTS `sys_access_modules`;

CREATE TABLE `sys_access_modules` (
  `id` int(11) NOT NULL auto_increment,
  `name` char(255) default NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `sys_access_modules` table  (LIMIT 0,500)
#

INSERT INTO `sys_access_modules` (`id`, `name`) VALUES 
  (1,'news'),
  (2,'page'),
  (3,'timer'),
  (4,'user');

COMMIT;

#
# Structure for the `sys_access_modules_sections` table : 
#

DROP TABLE IF EXISTS `sys_access_modules_sections`;

CREATE TABLE `sys_access_modules_sections` (
  `id` int(11) NOT NULL auto_increment,
  `module_id` int(11) default NULL,
  `section_id` int(11) default NULL,
  PRIMARY KEY  (`id`),
  KEY `module_section` (`section_id`,`module_id`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `sys_access_modules_sections` table  (LIMIT 0,500)
#

INSERT INTO `sys_access_modules_sections` (`id`, `module_id`, `section_id`) VALUES 
  (1,1,1),
  (2,2,2),
  (3,3,4),
  (4,4,3);

COMMIT;

#
# Structure for the `sys_access_modules_sections_properties` table : 
#

DROP TABLE IF EXISTS `sys_access_modules_sections_properties`;

CREATE TABLE `sys_access_modules_sections_properties` (
  `id` int(11) NOT NULL auto_increment,
  `module_section_id` int(11) default NULL,
  `property_id` int(11) default NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `module_poperty_unique` (`module_section_id`,`property_id`),
  KEY `property_id` (`property_id`),
  KEY `module_id` (`module_section_id`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `sys_access_modules_sections_properties` table  (LIMIT 0,500)
#

INSERT INTO `sys_access_modules_sections_properties` (`id`, `module_section_id`, `property_id`) VALUES 
  (1,1,1),
  (2,1,2),
  (3,1,3),
  (4,1,4),
  (5,1,5),
  (6,1,6),
  (7,2,2),
  (8,2,4),
  (9,2,5),
  (10,2,6),
  (11,3,2),
  (12,4,7),
  (13,4,8);

COMMIT;

#
# Structure for the `sys_access_properties` table : 
#

DROP TABLE IF EXISTS `sys_access_properties`;

CREATE TABLE `sys_access_properties` (
  `id` int(11) NOT NULL auto_increment,
  `name` char(255) default NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `sys_access_properties` table  (LIMIT 0,500)
#

INSERT INTO `sys_access_properties` (`id`, `name`) VALUES 
  (1,'list'),
  (2,'view'),
  (3,'folders'),
  (4,'create'),
  (5,'edit'),
  (6,'delete'),
  (7,'login'),
  (8,'exit');

COMMIT;

#
# Structure for the `sys_access_sections` table : 
#

DROP TABLE IF EXISTS `sys_access_sections`;

CREATE TABLE `sys_access_sections` (
  `id` int(11) NOT NULL auto_increment,
  `name` char(255) default NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `sys_access_sections` table  (LIMIT 0,500)
#

INSERT INTO `sys_access_sections` (`id`, `name`) VALUES 
  (1,'news'),
  (2,'page'),
  (3,'user'),
  (4,'timer');

COMMIT;

#
# Structure for the `sys_cfg` table : 
#

DROP TABLE IF EXISTS `sys_cfg`;

CREATE TABLE `sys_cfg` (
  `id` int(11) NOT NULL auto_increment,
  `section` varchar(255) NOT NULL default '',
  `module` varchar(255) NOT NULL default '',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `section_module` (`section`,`module`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `sys_cfg` table  (LIMIT 0,500)
#

INSERT INTO `sys_cfg` (`id`, `section`, `module`) VALUES 
  (1,'','common'),
  (2,'','news');

COMMIT;

#
# Structure for the `sys_cfg_values` table : 
#

DROP TABLE IF EXISTS `sys_cfg_values`;

CREATE TABLE `sys_cfg_values` (
  `id` int(11) NOT NULL auto_increment,
  `cfg_id` int(11) NOT NULL default '0',
  `name` varchar(255) NOT NULL default '',
  `value` varchar(255) NOT NULL default '',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `cfg_id_name` (`cfg_id`,`name`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `sys_cfg_values` table  (LIMIT 0,500)
#

INSERT INTO `sys_cfg_values` (`id`, `cfg_id`, `name`, `value`) VALUES 
  (1,1,'cache','true'),
  (2,2,'items_per_page','10');

COMMIT;

#
# Structure for the `user_user` table : 
#

DROP TABLE IF EXISTS `user_user`;

CREATE TABLE `user_user` (
  `id` int(11) NOT NULL auto_increment,
  `login` varchar(255) NOT NULL default '',
  `password` varchar(32) NOT NULL default '',
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `user_user` table  (LIMIT 0,500)
#

INSERT INTO `user_user` (`id`, `login`, `password`) VALUES 
  (1,'guest',''),
  (2,'admin','098f6bcd4621d373cade4e832627b4f6');

COMMIT;

#
# Structure for the `user_user_group` table : 
#

DROP TABLE IF EXISTS `user_user_group`;

CREATE TABLE `user_user_group` (
  `id` int(11) NOT NULL auto_increment,
  `name` char(255) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `user_user_group` table  (LIMIT 0,500)
#

INSERT INTO `user_user_group` (`id`, `name`) VALUES 
  (2,'unauth'),
  (3,'auth'),
  (1,'all');

COMMIT;

#
# Structure for the `user_user_group_rel` table : 
#

DROP TABLE IF EXISTS `user_user_group_rel`;

CREATE TABLE `user_user_group_rel` (
  `id` int(11) NOT NULL auto_increment,
  `group_id` int(11) default NULL,
  `user_id` int(11) default NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `group_id` (`group_id`,`user_id`)
) ENGINE=MyISAM DEFAULT CHARSET=cp1251;

#
# Data for the `user_user_group_rel` table  (LIMIT 0,500)
#

INSERT INTO `user_user_group_rel` (`id`, `group_id`, `user_id`) VALUES 
  (1,2,1),
  (2,3,2),
  (3,1,1),
  (4,1,2);

COMMIT;
