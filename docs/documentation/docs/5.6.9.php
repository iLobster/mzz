<p>Давайте подведём итог проделанной работе. В течение нескольких часов мы написали достаточно универсальный модуль, который теперь без лишних трудозатрад можно запустить в контексте другого модуля, таким образом расширив функциональность, не прибегая к каким либо модификациям кода. Продемонстрируем это на практике: добавьте в шаблон page.view.tpl отображения конкретной страницы строку</p>
<<code>>{load module="comments" section="comments" action="list" parent_id=$page->getObjId()}<</code>>
<p>и откройте любую страницу (Однако стоит заметить, что эта запись не совсем корректна, поскольку автором будет установлен тот, кто ПЕРВЫМ откроет указанную страницу. Это устраняется добавлением поля author в модуль Page и передачей значения этого поля в модуль Comments). Снизу должно появиться поле для ввода. Теперь страницы так же комментируемы. И так - для любого из объектов. Удобно, не правда ли? ;)</p>
<p>Подобные модули мы решили назвать addon'ы, потому как сами по себе они никакой смысловой нагрузки не несут, однако могут быть дополнениями к существующим модулям.</p>
<p>Ну и в заключении давайте поведём итог - а зачем же были нужны commentsFolder'ы? Как вы заметили - commentsFolder является неким "контейнером" для комментариев. Именно сущности commentsFolder принадлежат методы list и post. Также, изменяя права на commentsFolder, можно управлять - кому можно добавлять комментарии для данного объекта, а кому - нет, а также устанавливать права по умолчанию для вновь создаваемых комментариев.</p>